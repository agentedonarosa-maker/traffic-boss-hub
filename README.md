# TrafficPro

<div align="center">

![TrafficPro Logo](https://lovable.dev/projects/d707b2cd-02af-4bd8-b170-ae2153e7654c)

**Plataforma Profissional de Gest√£o de Campanhas de Marketing Digital**

[![License](https://img.shields.io/badge/license-Proprietary-blue.svg)](LICENSE)
[![React](https://img.shields.io/badge/React-18.3.1-61DAFB?logo=react)](https://reactjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.x-3178C6?logo=typescript)](https://www.typescriptlang.org/)
[![Supabase](https://img.shields.io/badge/Supabase-2.x-3ECF8E?logo=supabase)](https://supabase.com/)

</div>

---

## üìã √çndice

- [Sobre o Projeto](#-sobre-o-projeto)
- [Funcionalidades](#-funcionalidades)
- [Tecnologias Utilizadas](#-tecnologias-utilizadas)
- [Pr√©-requisitos](#-pr√©-requisitos)
- [Instala√ß√£o](#-instala√ß√£o)
- [Configura√ß√£o](#-configura√ß√£o)
- [Estrutura do Projeto](#-estrutura-do-projeto)
- [Integra√ß√µes](#-integra√ß√µes)
- [Seguran√ßa](#-seguran√ßa)
- [Deployment](#-deployment)
- [Documenta√ß√£o Adicional](#-documenta√ß√£o-adicional)
- [Suporte](#-suporte)
- [Licen√ßa](#-licen√ßa)

---

## üöÄ Sobre o Projeto

**TrafficPro** √© uma plataforma completa de gest√£o de campanhas de marketing digital que centraliza e otimiza o gerenciamento de an√∫ncios em m√∫ltiplas plataformas publicit√°rias. Desenvolvida com tecnologias modernas e foco em seguran√ßa, a solu√ß√£o oferece integra√ß√£o nativa com as principais plataformas de an√∫ncios do mercado.

### Objetivo

Proporcionar a ag√™ncias e profissionais de marketing uma ferramenta poderosa para:
- Centralizar dados de campanhas de diferentes plataformas
- Automatizar sincroniza√ß√£o de m√©tricas
- Gerar relat√≥rios profissionais e personalizados
- Gerenciar clientes e contratos de forma eficiente
- Monitorar performance em tempo real

---

## ‚ú® Funcionalidades

### Dashboard Inteligente
- **Vis√£o Geral de M√©tricas**: Acompanhe investimento, impress√µes, cliques, leads, vendas e ROAS em tempo real
- **Gr√°ficos Interativos**: Visualiza√ß√£o de dados com gr√°ficos responsivos e interativos
- **Filtros Personalizados**: Filtre dados por cliente, campanha, per√≠odo e plataforma

### Gest√£o de Clientes
- **Cadastro Completo**: Registre informa√ß√µes detalhadas de clientes
- **Portal do Cliente**: Acesso exclusivo para clientes visualizarem suas campanhas
- **Contratos Digitais**: Envio e gerenciamento de contratos via email
- **Tokens de Acesso**: Sistema seguro de autentica√ß√£o para clientes

### Campanhas
- **Cria√ß√£o e Edi√ß√£o**: Interface intuitiva para gerenciar campanhas
- **M√©tricas Detalhadas**: Acompanhe todas as m√©tricas importantes por campanha
- **Hist√≥rico Completo**: Visualize o hist√≥rico de performance ao longo do tempo
- **Status e Tags**: Organize campanhas com status e categorias personalizadas

### Integra√ß√µes de An√∫ncios
- **Meta Ads (Facebook/Instagram)**: Sincroniza√ß√£o autom√°tica de campanhas, m√©tricas e custos
- **Google Ads**: Integra√ß√£o completa via API oficial
- **TikTok Ads**: Sincroniza√ß√£o de dados de campanhas TikTok
- **Sincroniza√ß√£o Autom√°tica**: Cronjobs di√°rios para atualiza√ß√£o de dados
- **Credenciais Seguras**: Armazenamento criptografado via Supabase Vault

### Calend√°rio e Reuni√µes
- **Agendamento de Reuni√µes**: Organize reuni√µes com clientes
- **Visualiza√ß√£o de Calend√°rio**: Interface de calend√°rio intuitiva
- **Tarefas de Otimiza√ß√£o**: Gerencie tarefas de otimiza√ß√£o de campanhas
- **Notifica√ß√µes**: Alertas para reuni√µes e tarefas importantes

### Relat√≥rios Profissionais
- **Gera√ß√£o Autom√°tica**: Crie relat√≥rios detalhados em PDF
- **Personaliza√ß√£o**: Escolha m√©tricas, per√≠odos e clientes
- **Design Profissional**: Relat√≥rios com layout profissional e branding
- **Exporta√ß√£o**: Exporte relat√≥rios em PDF para compartilhamento

### Sistema de Notifica√ß√µes
- **Notifica√ß√µes em Tempo Real**: Alertas sobre eventos importantes
- **Central de Notifica√ß√µes**: Visualize todas as notifica√ß√µes em um s√≥ lugar
- **Marca√ß√£o de Leitura**: Gerencie notifica√ß√µes lidas e n√£o lidas

### Autentica√ß√£o e Seguran√ßa
- **Autentica√ß√£o Segura**: Sistema de login com Supabase Auth
- **Controle de Acesso**: Diferentes n√≠veis de permiss√£o para usu√°rios
- **Prote√ß√£o de Dados**: RLS (Row Level Security) implementado em todas as tabelas
- **Criptografia**: Credenciais sens√≠veis armazenadas no Supabase Vault

---

## üõ† Tecnologias Utilizadas

### Frontend
- **[React 18.3.1](https://reactjs.org/)** - Biblioteca JavaScript para interfaces de usu√°rio
- **[TypeScript](https://www.typescriptlang.org/)** - Superset tipado de JavaScript
- **[Vite](https://vitejs.dev/)** - Build tool r√°pido e moderno
- **[Tailwind CSS](https://tailwindcss.com/)** - Framework CSS utility-first
- **[shadcn/ui](https://ui.shadcn.com/)** - Componentes React reutiliz√°veis e acess√≠veis
- **[React Router DOM](https://reactrouter.com/)** - Roteamento para aplica√ß√µes React
- **[React Hook Form](https://react-hook-form.com/)** - Gerenciamento de formul√°rios
- **[Zod](https://zod.dev/)** - Valida√ß√£o de schemas TypeScript-first
- **[TanStack Query](https://tanstack.com/query)** - Gerenciamento de estado e cache de dados
- **[Recharts](https://recharts.org/)** - Biblioteca de gr√°ficos para React
- **[date-fns](https://date-fns.org/)** - Biblioteca moderna de manipula√ß√£o de datas
- **[Lucide React](https://lucide.dev/)** - √çcones SVG bonitos e consistentes

### Backend & Infraestrutura
- **[Supabase](https://supabase.com/)** - Backend as a Service (BaaS)
  - PostgreSQL Database
  - Authentication
  - Row Level Security (RLS)
  - Edge Functions
  - Vault (armazenamento seguro de secrets)
- **[jsPDF](https://github.com/parallax/jsPDF)** - Gera√ß√£o de PDFs no client-side

### Ferramentas de Desenvolvimento
- **ESLint** - Linting de c√≥digo JavaScript/TypeScript
- **PostCSS** - Processamento de CSS
- **Bun** - Runtime JavaScript e gerenciador de pacotes

---

## üì¶ Pr√©-requisitos

Antes de come√ßar, certifique-se de ter instalado:

- **Node.js** (vers√£o 18.x ou superior) - [Download](https://nodejs.org/)
- **npm** (geralmente vem com Node.js) ou **[Bun](https://bun.sh/)**
- **Git** - [Download](https://git-scm.com/)
- Conta no **[Supabase](https://supabase.com/)** (para configura√ß√£o do backend)

---

## üîß Instala√ß√£o

### 1. Clone o Reposit√≥rio

```bash
# Clone o reposit√≥rio
git clone <URL_DO_REPOSITORIO>

# Navegue at√© o diret√≥rio do projeto
cd trafficpro
```

### 2. Instale as Depend√™ncias

```bash
# Usando npm
npm install

# OU usando Bun (mais r√°pido)
bun install
```

### 3. Configure as Vari√°veis de Ambiente

‚ö†Ô∏è **ATEN√á√ÉO: Seguran√ßa de Credenciais**

1. **Copie o arquivo de exemplo:**
   ```bash
   cp .env.example .env
   ```

2. **Preencha as credenciais:**
   - As credenciais do Supabase est√£o dispon√≠veis no [Dashboard do Supabase](https://supabase.com/dashboard/project/bdkdcwfmevyvzxjvmxgt/settings/api)
   - **Nota Importante**: O arquivo `src/integrations/supabase/client.ts` j√° cont√©m as credenciais p√∫blicas (ANON_KEY) hardcoded para facilitar o desenvolvimento

3. **‚ö†Ô∏è N√ÉO COMMITE O ARQUIVO `.env`**
   - O `.env` est√° protegido pelo `.gitignore`
   - Nunca adicione credenciais sens√≠veis ao reposit√≥rio Git
   - Use apenas `.env.example` para documentar vari√°veis necess√°rias

#### üîí Tipos de Credenciais

| Tipo | Seguran√ßa | Uso | Observa√ß√£o |
|------|-----------|-----|------------|
| `ANON_KEY` / `PUBLISHABLE_KEY` | ‚úÖ P√∫blica | Frontend | J√° hardcoded no c√≥digo |
| `SERVICE_ROLE_KEY` | üî¥ **SECRETA** | Backend/Edge Functions | **NUNCA expor no frontend** |
| Tokens de integra√ß√£o (Meta/Google/TikTok) | üî¥ **SECRETOS** | Edge Functions | Armazenados criptografados no Supabase Vault |

**Credenciais de integra√ß√µes** s√£o automaticamente armazenadas de forma criptografada no **Supabase Vault** quando voc√™ configura uma integra√ß√£o pela interface do sistema.

üìñ **Leia mais sobre seguran√ßa**: [DOCS/SECURITY.md](DOCS/SECURITY.md)

### 4. Inicie o Servidor de Desenvolvimento

```bash
# Usando npm
npm run dev

# OU usando Bun
bun run dev
```

O projeto estar√° dispon√≠vel em: **http://localhost:5173**

---

## ‚öôÔ∏è Configura√ß√£o

### Configura√ß√£o do Supabase

O projeto utiliza um projeto Supabase externo j√° configurado. As principais configura√ß√µes incluem:

#### 1. Database Schema

O banco de dados possui as seguintes tabelas principais:
- `clients` - Cadastro de clientes
- `campaigns` - Campanhas de marketing
- `metrics` - M√©tricas de campanhas
- `integrations` - Integra√ß√µes com plataformas de an√∫ncios
- `meetings` - Agendamento de reuni√µes
- `tasks` - Tarefas de otimiza√ß√£o
- `notifications` - Sistema de notifica√ß√µes
- `reports` - Relat√≥rios gerados

#### 2. Row Level Security (RLS)

Todas as tabelas possuem pol√≠ticas RLS implementadas para garantir que:
- Usu√°rios s√≥ acessem seus pr√≥prios dados
- Clientes s√≥ visualizem suas pr√≥prias informa√ß√µes no portal
- Credenciais sens√≠veis sejam protegidas

#### 3. Edge Functions

O projeto utiliza Edge Functions para:
- **`sync-all-integrations`** - Sincroniza√ß√£o autom√°tica de todas as integra√ß√µes
- **`sync-meta-ads`** - Sincroniza√ß√£o espec√≠fica do Meta Ads
- **`sync-google-ads`** - Sincroniza√ß√£o espec√≠fica do Google Ads
- **`sync-tiktok-ads`** - Sincroniza√ß√£o espec√≠fica do TikTok Ads
- **`send-contract`** - Envio de contratos por email
- **`validate-client-token`** - Valida√ß√£o de tokens de acesso de clientes
- **`manage-integration-credentials`** - Gerenciamento de credenciais no Vault
- **`migrate-credentials-to-vault`** - Migra√ß√£o de credenciais para o Vault

#### 4. Cronjobs Autom√°ticos

Um cronjob est√° configurado para executar diariamente √†s 03:00 (UTC):
```sql
-- Sincroniza√ß√£o autom√°tica di√°ria
SELECT cron.schedule(
  'sync-all-integrations-daily',
  '0 3 * * *',
  $$
  SELECT net.http_post(
    url:='https://bdkdcwfmevyvzxjvmxgt.supabase.co/functions/v1/sync-all-integrations',
    headers:='{"Content-Type": "application/json", "Authorization": "Bearer <service_role_key>"}'::jsonb
  ) as request_id;
  $$
);
```

---

## üìÅ Estrutura do Projeto

```
trafficpro/
‚îú‚îÄ‚îÄ DOCS/                           # Documenta√ß√£o t√©cnica
‚îÇ   ‚îú‚îÄ‚îÄ INTEGRATIONS.md            # Guia de integra√ß√µes
‚îÇ   ‚îú‚îÄ‚îÄ SECURITY.md                # Documenta√ß√£o de seguran√ßa
‚îÇ   ‚îî‚îÄ‚îÄ VAULT-MIGRATION.md         # Guia de migra√ß√£o para Vault
‚îú‚îÄ‚îÄ public/                         # Arquivos p√∫blicos est√°ticos
‚îÇ   ‚îú‚îÄ‚îÄ robots.txt                 # Configura√ß√£o para crawlers
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/                # Componentes React
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/                  # Componentes de autentica√ß√£o
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ProtectedRoute.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calendar/              # Componentes de calend√°rio
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CalendarView.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MeetingForm.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ OptimizationTasks.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UpcomingMeetings.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ campaigns/             # Componentes de campanhas
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CampaignForm.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ clients/               # Componentes de clientes
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ClientForm.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard/             # Componentes do dashboard
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MetricCard.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout/                # Componentes de layout
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AppLayout.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AppSidebar.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ NotificationsPopover.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reports/               # Componentes de relat√≥rios
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ReportGenerator.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ReportView.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui/                    # Componentes UI (shadcn/ui)
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ button.tsx
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ card.tsx
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ dialog.tsx
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ... (50+ componentes)
‚îÇ   ‚îú‚îÄ‚îÄ contexts/                  # Contextos React
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AuthContext.tsx        # Contexto de autentica√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ hooks/                     # Custom React Hooks
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useCampaigns.ts        # Hook para campanhas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useClients.ts          # Hook para clientes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useIntegrations.ts     # Hook para integra√ß√µes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useMeetings.ts         # Hook para reuni√µes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useNotifications.ts    # Hook para notifica√ß√µes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ... (30+ hooks)
‚îÇ   ‚îú‚îÄ‚îÄ integrations/              # Integra√ß√µes externas
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ supabase/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ client.ts          # Cliente Supabase
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ types.ts           # Tipos TypeScript gerados
‚îÇ   ‚îú‚îÄ‚îÄ lib/                       # Utilit√°rios e bibliotecas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pdfExport.ts           # Gera√ß√£o de PDFs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ security.ts            # Fun√ß√µes de seguran√ßa
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils.ts               # Fun√ß√µes utilit√°rias
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validations/           # Schemas de valida√ß√£o Zod
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ campaign.ts
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ client.ts
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ meeting.ts
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ metric.ts
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ task.ts
‚îÇ   ‚îú‚îÄ‚îÄ pages/                     # P√°ginas da aplica√ß√£o
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Auth.tsx               # P√°gina de login/registro
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Calendar.tsx           # P√°gina de calend√°rio
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Campaigns.tsx          # P√°gina de campanhas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ClientPortal.tsx       # Portal do cliente
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Clients.tsx            # P√°gina de clientes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dashboard.tsx          # Dashboard principal
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Index.tsx              # P√°gina inicial
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NotFound.tsx           # P√°gina 404
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Onboarding.tsx         # P√°gina de onboarding
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Reports.tsx            # P√°gina de relat√≥rios
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Settings.tsx           # Configura√ß√µes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Terms.tsx              # Termos de uso
‚îÇ   ‚îú‚îÄ‚îÄ App.tsx                    # Componente raiz da aplica√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ App.css                    # Estilos globais
‚îÇ   ‚îú‚îÄ‚îÄ index.css                  # Estilos e tokens do design system
‚îÇ   ‚îú‚îÄ‚îÄ main.tsx                   # Ponto de entrada da aplica√ß√£o
‚îÇ   ‚îî‚îÄ‚îÄ vite-env.d.ts              # Tipos do Vite
‚îú‚îÄ‚îÄ supabase/                      # Configura√ß√£o Supabase
‚îÇ   ‚îú‚îÄ‚îÄ config.toml                # Configura√ß√£o do projeto
‚îÇ   ‚îú‚îÄ‚îÄ functions/                 # Edge Functions
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ manage-integration-credentials/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ migrate-credentials-to-vault/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ send-contract/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sync-all-integrations/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sync-google-ads/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sync-meta-ads/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sync-tiktok-ads/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validate-client-token/
‚îÇ   ‚îî‚îÄ‚îÄ migrations/                # Migra√ß√µes do banco de dados
‚îú‚îÄ‚îÄ .gitignore                     # Arquivos ignorados pelo Git
‚îú‚îÄ‚îÄ components.json                # Configura√ß√£o shadcn/ui
‚îú‚îÄ‚îÄ eslint.config.js               # Configura√ß√£o ESLint
‚îú‚îÄ‚îÄ index.html                     # HTML principal
‚îú‚îÄ‚îÄ package.json                   # Depend√™ncias do projeto
‚îú‚îÄ‚îÄ postcss.config.js              # Configura√ß√£o PostCSS
‚îú‚îÄ‚îÄ README.md                      # Este arquivo
‚îú‚îÄ‚îÄ tailwind.config.ts             # Configura√ß√£o Tailwind CSS
‚îú‚îÄ‚îÄ tsconfig.json                  # Configura√ß√£o TypeScript
‚îî‚îÄ‚îÄ vite.config.ts                 # Configura√ß√£o Vite
```

---

## üîå Integra√ß√µes

### Meta Ads (Facebook/Instagram)

Sincronize dados de campanhas do Facebook e Instagram Ads.

**Credenciais Necess√°rias:**
- App ID
- App Secret
- Access Token (permanente)
- Ad Account ID

**M√©tricas Sincronizadas:**
- Impress√µes
- Cliques
- Investimento
- Leads
- Vendas
- Receita
- CTR, CPL, ROAS

üìñ **[Guia Completo de Integra√ß√£o Meta Ads](DOCS/INTEGRATIONS.md#meta-ads-integration)**

---

### Google Ads

Integra√ß√£o completa com a API do Google Ads.

**Credenciais Necess√°rias:**
- Client ID
- Client Secret
- Refresh Token
- Developer Token
- Customer ID

**M√©tricas Sincronizadas:**
- Impress√µes
- Cliques
- Investimento
- Convers√µes
- CTR, CPC, CPA

üìñ **[Guia Completo de Integra√ß√£o Google Ads](DOCS/INTEGRATIONS.md#google-ads-integration)**

---

### TikTok Ads

Sincronize campanhas da plataforma TikTok for Business.

**Credenciais Necess√°rias:**
- Access Token
- Advertiser ID

**M√©tricas Sincronizadas:**
- Impress√µes
- Cliques
- Investimento
- Convers√µes
- CTR, CPC, CVR

üìñ **[Guia Completo de Integra√ß√£o TikTok Ads](DOCS/INTEGRATIONS.md#tiktok-ads-integration)**

---

### Sincroniza√ß√£o Manual

Para testar ou for√ßar sincroniza√ß√µes manualmente:

```bash
# Sincronizar todas as integra√ß√µes
curl -X POST \
  https://bdkdcwfmevyvzxjvmxgt.supabase.co/functions/v1/sync-all-integrations \
  -H "Authorization: Bearer <anon_key>"

# Sincronizar apenas Meta Ads
curl -X POST \
  https://bdkdcwfmevyvzxjvmxgt.supabase.co/functions/v1/sync-meta-ads \
  -H "Authorization: Bearer <anon_key>"

# Sincronizar apenas Google Ads
curl -X POST \
  https://bdkdcwfmevyvzxjvmxgt.supabase.co/functions/v1/sync-google-ads \
  -H "Authorization: Bearer <anon_key>"

# Sincronizar apenas TikTok Ads
curl -X POST \
  https://bdkdcwfmevyvzxjvmxgt.supabase.co/functions/v1/sync-tiktok-ads \
  -H "Authorization: Bearer <anon_key>"
```

---

## üîê Seguran√ßa

### Armazenamento Seguro de Credenciais

O TrafficPro utiliza **Supabase Vault** para armazenamento criptografado de credenciais sens√≠veis:

‚úÖ **Implementado:**
- Credenciais de integra√ß√µes armazenadas no Vault
- Edge Functions acessam credenciais via Vault
- Mascaramento autom√°tico de dados sens√≠veis em logs
- RLS habilitado em todas as tabelas

### Prote√ß√£o de Dados de Clientes

- **RLS (Row Level Security)**: Cada usu√°rio s√≥ acessa seus pr√≥prios dados
- **Valida√ß√£o de Tokens**: Tokens de cliente validados via Edge Function
- **Portal Isolado**: Clientes s√≥ visualizam suas pr√≥prias campanhas

### Autentica√ß√£o

- **Supabase Auth**: Sistema de autentica√ß√£o robusto
- **Prote√ß√£o de Rotas**: Rotas protegidas com `ProtectedRoute`
- **Sess√µes Seguras**: Gerenciamento autom√°tico de sess√µes

### Migra√ß√£o de Credenciais

Para migrar credenciais existentes para o Vault:

```bash
curl -X POST \
  https://bdkdcwfmevyvzxjvmxgt.supabase.co/functions/v1/migrate-credentials-to-vault \
  -H "Authorization: Bearer <service_role_key>"
```

üìñ **[Guia Completo de Seguran√ßa](DOCS/SECURITY.md)**
üìñ **[Guia de Migra√ß√£o para Vault](DOCS/VAULT-MIGRATION.md)**

---

## üöÄ Deployment

### Deploy via Lovable

O projeto est√° hospedado no **Lovable** e pode ser publicado facilmente:

1. Acesse o [Projeto no Lovable](https://lovable.dev/projects/d707b2cd-02af-4bd8-b170-ae2153e7654c)
2. Clique no bot√£o **"Publish"** no canto superior direito
3. Configure seu dom√≠nio personalizado em **Settings > Domains**

**URL do Projeto:** https://lovable.dev/projects/d707b2cd-02af-4bd8-b170-ae2153e7654c

### Deploy Manual

Para deploy em outras plataformas (Vercel, Netlify, etc.):

```bash
# Build do projeto
npm run build

# O output estar√° na pasta dist/
```

### Deploy em VPS Self-Hosted

Para hospedar o TrafficPro em seu pr√≥prio servidor VPS (Ubuntu/Debian):

#### Pr√©-requisitos do Servidor

- Ubuntu 20.04+ ou Debian 11+
- M√≠nimo 2GB RAM
- 20GB de armazenamento
- Acesso root ou sudo
- Dom√≠nio configurado apontando para o IP do servidor

#### 1. Configura√ß√£o Inicial do Servidor

```bash
# Atualize o sistema
sudo apt update && sudo apt upgrade -y

# Instale depend√™ncias essenciais
sudo apt install -y curl git nginx certbot python3-certbot-nginx ufw

# Configure o firewall
sudo ufw allow OpenSSH
sudo ufw allow 'Nginx Full'
sudo ufw enable
```

#### 2. Instale o Node.js

```bash
# Instale o Node.js 18.x via NodeSource
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt install -y nodejs

# Verifique a instala√ß√£o
node --version  # Deve mostrar v18.x.x
npm --version   # Deve mostrar 9.x.x ou superior
```

#### 3. Clone e Configure o Projeto

```bash
# Crie um diret√≥rio para aplica√ß√µes
sudo mkdir -p /var/www
cd /var/www

# Clone o reposit√≥rio
sudo git clone <URL_DO_SEU_REPOSITORIO> trafficpro
cd trafficpro

# Instale as depend√™ncias
sudo npm install

# Build do projeto
sudo npm run build
```

#### 4. Configure o Nginx

Crie um arquivo de configura√ß√£o para o Nginx:

```bash
sudo nano /etc/nginx/sites-available/trafficpro
```

Adicione a seguinte configura√ß√£o:

```nginx
server {
    listen 80;
    listen [::]:80;
    server_name seu-dominio.com www.seu-dominio.com;

    root /var/www/trafficpro/dist;
    index index.html;

    # Compress√£o Gzip
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types text/plain text/css text/xml text/javascript application/javascript application/xml+rss application/json;

    # Cache de assets est√°ticos
    location ~* \.(js|css|png|jpg|jpeg|gif|svg|ico|woff|woff2|ttf|eot)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }

    # SPA routing - redireciona todas as rotas para index.html
    location / {
        try_files $uri $uri/ /index.html;
    }

    # Security headers
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header Referrer-Policy "strict-origin-when-cross-origin" always;

    # Desabilitar logs de acesso para assets (opcional)
    location ~* \.(jpg|jpeg|png|gif|ico|css|js|svg|woff|woff2)$ {
        access_log off;
    }
}
```

Ative a configura√ß√£o:

```bash
# Crie um link simb√≥lico
sudo ln -s /etc/nginx/sites-available/trafficpro /etc/nginx/sites-enabled/

# Remova a configura√ß√£o padr√£o
sudo rm /etc/nginx/sites-enabled/default

# Teste a configura√ß√£o
sudo nginx -t

# Reinicie o Nginx
sudo systemctl restart nginx
```

#### 5. Configure SSL com Let's Encrypt

```bash
# Obtenha certificado SSL gratuito
sudo certbot --nginx -d seu-dominio.com -d www.seu-dominio.com

# Certbot ir√°:
# 1. Verificar propriedade do dom√≠nio
# 2. Gerar certificados SSL
# 3. Configurar HTTPS no Nginx automaticamente
# 4. Configurar renova√ß√£o autom√°tica

# Teste a renova√ß√£o autom√°tica
sudo certbot renew --dry-run
```

Ap√≥s a configura√ß√£o SSL, o Nginx ser√° atualizado automaticamente para:

```nginx
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name seu-dominio.com www.seu-dominio.com;

    ssl_certificate /etc/letsencrypt/live/seu-dominio.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/seu-dominio.com/privkey.pem;
    
    # ... resto da configura√ß√£o
}

# Redirecionamento HTTP para HTTPS
server {
    listen 80;
    listen [::]:80;
    server_name seu-dominio.com www.seu-dominio.com;
    return 301 https://$server_name$request_uri;
}
```

#### 6. Configure Atualiza√ß√µes Autom√°ticas

Crie um script de deploy:

```bash
sudo nano /var/www/trafficpro/deploy.sh
```

Adicione o seguinte conte√∫do:

```bash
#!/bin/bash

# Script de Deploy TrafficPro
# Copyright ¬© 2025 Mauro Duffrayer

echo "üöÄ Iniciando deploy do TrafficPro..."

# Navegar para o diret√≥rio do projeto
cd /var/www/trafficpro

# Fazer backup do build anterior
echo "üì¶ Criando backup..."
if [ -d "dist" ]; then
    mv dist dist.backup.$(date +%Y%m%d_%H%M%S)
fi

# Atualizar c√≥digo do reposit√≥rio
echo "üì• Atualizando c√≥digo..."
git pull origin main

# Instalar/atualizar depend√™ncias
echo "üì¶ Instalando depend√™ncias..."
npm install

# Build do projeto
echo "üî® Compilando projeto..."
npm run build

# Verificar se o build foi bem-sucedido
if [ ! -d "dist" ]; then
    echo "‚ùå Erro: Build falhou!"
    if [ -d "dist.backup.*" ]; then
        echo "‚ôªÔ∏è  Restaurando backup..."
        mv dist.backup.* dist
    fi
    exit 1
fi

# Limpar backups antigos (manter apenas os 3 mais recentes)
echo "üßπ Limpando backups antigos..."
ls -dt dist.backup.* 2>/dev/null | tail -n +4 | xargs rm -rf

# Recarregar Nginx
echo "üîÑ Recarregando Nginx..."
sudo systemctl reload nginx

echo "‚úÖ Deploy conclu√≠do com sucesso!"
echo "üåê Site dispon√≠vel em: https://seu-dominio.com"
```

Torne o script execut√°vel:

```bash
sudo chmod +x /var/www/trafficpro/deploy.sh
```

Para fazer deploy:

```bash
sudo /var/www/trafficpro/deploy.sh
```

#### 7. Configura√ß√£o de Deploy com GitHub Actions (Opcional)

Crie `.github/workflows/deploy.yml` no seu reposit√≥rio:

```yaml
name: Deploy to VPS

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: Deploy via SSH
      uses: appleboy/ssh-action@master
      with:
        host: ${{ secrets.VPS_HOST }}
        username: ${{ secrets.VPS_USERNAME }}
        key: ${{ secrets.VPS_SSH_KEY }}
        script: |
          cd /var/www/trafficpro
          ./deploy.sh
```

Configure os secrets no GitHub:
- `VPS_HOST`: IP do seu servidor
- `VPS_USERNAME`: usu√°rio SSH (geralmente root)
- `VPS_SSH_KEY`: chave SSH privada

#### 8. Monitoramento e Logs

```bash
# Ver logs do Nginx
sudo tail -f /var/log/nginx/access.log
sudo tail -f /var/log/nginx/error.log

# Verificar status do Nginx
sudo systemctl status nginx

# Reiniciar Nginx se necess√°rio
sudo systemctl restart nginx

# Verificar uso de recursos
htop  # ou top

# Verificar espa√ßo em disco
df -h
```

#### 9. Configura√ß√£o de PM2 para SPA (Alternativa)

Se preferir usar PM2 para servir a aplica√ß√£o:

```bash
# Instalar PM2 globalmente
sudo npm install -g pm2

# Criar servidor Node.js simples
sudo nano /var/www/trafficpro/server.js
```

Adicione:

```javascript
const express = require('express');
const path = require('path');
const app = express();

app.use(express.static(path.join(__dirname, 'dist')));

app.get('*', (req, res) => {
  res.sendFile(path.join(__dirname, 'dist', 'index.html'));
});

const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
  console.log(`TrafficPro rodando na porta ${PORT}`);
});
```

```bash
# Instalar express
cd /var/www/trafficpro
sudo npm install express

# Iniciar com PM2
sudo pm2 start server.js --name trafficpro

# Configurar inicializa√ß√£o autom√°tica
sudo pm2 startup
sudo pm2 save

# Comandos √∫teis do PM2
sudo pm2 status
sudo pm2 logs trafficpro
sudo pm2 restart trafficpro
```

Configure o Nginx como proxy reverso (atualize `/etc/nginx/sites-available/trafficpro`):

```nginx
server {
    listen 80;
    server_name seu-dominio.com;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

#### 10. Backup e Manuten√ß√£o

```bash
# Script de backup autom√°tico
sudo nano /var/www/backup.sh
```

Adicione:

```bash
#!/bin/bash
BACKUP_DIR="/var/backups/trafficpro"
mkdir -p $BACKUP_DIR

# Backup do c√≥digo
tar -czf $BACKUP_DIR/trafficpro_$(date +%Y%m%d).tar.gz /var/www/trafficpro

# Manter apenas backups dos √∫ltimos 7 dias
find $BACKUP_DIR -name "trafficpro_*.tar.gz" -mtime +7 -delete
```

Configure cron para backup di√°rio:

```bash
sudo crontab -e
```

Adicione:

```bash
# Backup di√°rio √†s 2h da manh√£
0 2 * * * /var/www/backup.sh
```

#### 11. Otimiza√ß√µes de Performance

```bash
# Instalar e configurar Redis (cache)
sudo apt install redis-server -y
sudo systemctl enable redis-server

# Configurar swap (se tiver menos de 4GB RAM)
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab
```

#### 12. Seguran√ßa Adicional

```bash
# Configurar fail2ban (prote√ß√£o contra brute force)
sudo apt install fail2ban -y
sudo systemctl enable fail2ban

# Desabilitar login root via SSH (recomendado)
sudo nano /etc/ssh/sshd_config
# Altere: PermitRootLogin no

# Reiniciar SSH
sudo systemctl restart sshd

# Configurar atualiza√ß√µes autom√°ticas de seguran√ßa
sudo apt install unattended-upgrades -y
sudo dpkg-reconfigure -plow unattended-upgrades
```

#### 13. Troubleshooting Comum

**Problema: Site n√£o carrega**
```bash
# Verificar se Nginx est√° rodando
sudo systemctl status nginx

# Verificar logs de erro
sudo tail -f /var/log/nginx/error.log

# Testar configura√ß√£o
sudo nginx -t
```

**Problema: Erro 502 Bad Gateway**
```bash
# Se usando PM2, verificar status
sudo pm2 status
sudo pm2 logs trafficpro

# Reiniciar aplica√ß√£o
sudo pm2 restart trafficpro
```

**Problema: Certificado SSL expirado**
```bash
# Renovar manualmente
sudo certbot renew

# Verificar renova√ß√£o autom√°tica
sudo systemctl status certbot.timer
```

**Problema: Sem espa√ßo em disco**
```bash
# Limpar logs antigos
sudo journalctl --vacuum-time=7d

# Limpar cache do npm
sudo npm cache clean --force

# Remover pacotes n√£o utilizados
sudo apt autoremove -y
```

#### 14. Checklist de Deploy

- [ ] Servidor atualizado e configurado
- [ ] Node.js instalado (v18+)
- [ ] Projeto clonado e build realizado
- [ ] Nginx configurado e testado
- [ ] SSL configurado com Let's Encrypt
- [ ] Firewall (UFW) configurado
- [ ] Script de deploy criado
- [ ] Backups autom√°ticos configurados
- [ ] Monitoramento ativo
- [ ] Documenta√ß√£o de acesso e credenciais
- [ ] Fail2ban configurado
- [ ] Testes de carga e performance realizados

### Configura√ß√£o de Dom√≠nio Personalizado

1. Configure os registros DNS:
   ```
   Tipo: A
   Nome: @ (ou subdom√≠nio desejado)
   Valor: 185.158.133.1
   ```

2. No Lovable, v√° em **Settings > Domains**

3. Adicione seu dom√≠nio e aguarde a verifica√ß√£o

4. Aguarde a propaga√ß√£o DNS (pode levar at√© 48h)

üìñ **[Documenta√ß√£o de Dom√≠nio Customizado](https://docs.lovable.dev/features/custom-domain)**

---

## üìö Documenta√ß√£o Adicional

- **[Guia de Integra√ß√µes](DOCS/INTEGRATIONS.md)** - Como configurar Meta Ads, Google Ads e TikTok Ads
- **[Documenta√ß√£o de Seguran√ßa](DOCS/SECURITY.md)** - Pol√≠ticas RLS, Vault e boas pr√°ticas
- **[Guia de Migra√ß√£o para Vault](DOCS/VAULT-MIGRATION.md)** - Como migrar credenciais existentes
- **[Documenta√ß√£o Lovable](https://docs.lovable.dev/)** - Documenta√ß√£o oficial do Lovable
- **[Documenta√ß√£o Supabase](https://supabase.com/docs)** - Documenta√ß√£o oficial do Supabase

---

## üí¨ Suporte

### Recursos de Suporte

- **Discord Lovable**: [Comunidade Lovable](https://discord.com/channels/1119885301872070706/1280461670979993613)
- **Documenta√ß√£o Lovable**: [docs.lovable.dev](https://docs.lovable.dev/)
- **Supabase Docs**: [supabase.com/docs](https://supabase.com/docs)

### Links √öteis do Projeto

- **Projeto Lovable**: https://lovable.dev/projects/d707b2cd-02af-4bd8-b170-ae2153e7654c
- **SQL Editor**: https://supabase.com/dashboard/project/bdkdcwfmevyvzxjvmxgt/sql/new
- **Edge Functions**: https://supabase.com/dashboard/project/bdkdcwfmevyvzxjvmxgt/functions
- **Auth Providers**: https://supabase.com/dashboard/project/bdkdcwfmevyvzxjvmxgt/auth/providers
- **Storage**: https://supabase.com/dashboard/project/bdkdcwfmevyvzxjvmxgt/storage/buckets

---

## üéØ Roadmap

### Futuras Funcionalidades
- [ ] Integra√ß√£o com LinkedIn Ads
- [ ] Integra√ß√£o com Twitter Ads
- [ ] Dashboard de BI com visualiza√ß√µes avan√ßadas
- [ ] Automa√ß√µes de otimiza√ß√£o de campanhas com IA
- [ ] Aplicativo m√≥vel (React Native)
- [ ] API p√∫blica para integra√ß√µes de terceiros
- [ ] Suporte multi-idioma (i18n)
- [ ] Modo offline com sincroniza√ß√£o

---

## üìÑ Licen√ßa

**Copyright ¬© 2025 Mauro Duffrayer. Todos os direitos reservados.**

Este projeto √© de propriedade exclusiva de **Mauro Duffrayer** (designer).

### Termos de Uso

- ‚úÖ Uso autorizado apenas pelo propriet√°rio e usu√°rios licenciados
- ‚ùå Proibida a reprodu√ß√£o, distribui√ß√£o ou modifica√ß√£o sem autoriza√ß√£o expressa
- ‚ùå Proibido o uso comercial n√£o autorizado
- ‚ùå Proibida a engenharia reversa

Para consultas sobre licenciamento, entre em contato com o propriet√°rio.

---

## üë®‚Äçüíª Autor

**Mauro Duffrayer**  
Designer & Desenvolvedor

---

<div align="center">

**Desenvolvido com ‚ù§Ô∏è por Mauro Duffrayer**

[![Lovable](https://img.shields.io/badge/Built%20with-Lovable-ff69b4)](https://lovable.dev)
[![Supabase](https://img.shields.io/badge/Powered%20by-Supabase-3ECF8E)](https://supabase.com)

</div>
